<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Financial Management</h1>

    <form method="GET" action="{{ url_for('index') }}">
        <label for="month">Select Month:</label>
        <input type="month" id="month" name="month" value="{{ selected_month }}" required>
        <button type="submit">View Data</button>
    </form>

    <h2>Add Program</h2>
    <form method="POST" action="{{ url_for('add_program') }}">
        <label for="program_name">Program Name:</label>
        <input type="text" id="program_name" name="program_name" required>
        <br>
        <label for="daily_rate">Daily Rate:</label>
        <input type="number" step="0.01" id="daily_rate" name="daily_rate" required>
        <br>
        <label for="billed_residents">Billed Residents:</label>
        <input type="number" id="billed_residents" name="billed_residents" required>
        <br>
        <label for="average_occupancy">Average Occupancy:</label>
        <input type="number" step="0.01" id="average_occupancy" name="average_occupancy" required>
        <br>
        <label for="month">Month:</label>
        <input type="month" id="month" name="month" value="{{ selected_month }}" required>
        <br>
        <button type="submit">Add Program</button>
    </form>

    <h2>Add Static Income</h2>
    <form method="POST" action="{{ url_for('add_static_income') }}">
        <label for="income_source">Income Source:</label>
        <input type="text" id="income_source" name="income_source" required>
        <br>
        <label for="amount">Total Daily:</label>
        <input type="number" step="0.01" id="amount" name="amount" required>
        <br>
        <label for="month">Month:</label>
        <input type="month" id="month" name="month" value="{{ selected_month }}" required>
        <br>
        <button type="submit">Add Static Income</button>
    </form>

    <h2>Add Static Overhead</h2>
    <form method="POST" action="{{ url_for('add_static_overhead') }}">
        <label for="overhead_name">Overhead Name:</label>
        <input type="text" id="overhead_name" name="overhead_name" required>
        <br>
        <label for="amount">Daily:</label>
        <input type="number" step="0.01" id="amount" name="amount" required>
        <br>
        <label for="month">Month:</label>
        <input type="month" id="month" name="month" value="{{ selected_month }}" required>
        <br>
        <button type="submit">Add Static Overhead</button>
    </form>

    <h2>Financial Data for {{ selected_month }}</h2>
    <h3>Programs</h3>
    <ul>
        {% for program in programs %}
        <li>
            {{ program[1] }} - Daily Rate: {{ program[2] }}, Billed Residents: {{ program[3] }}, Average Occupancy: {{ program[4] }}, Total Daily Income: {{ program[5] }}
            <a href="{{ url_for('edit_program', id=program[0]) }}">Edit</a>
            <a href="{{ url_for('delete_program', id=program[0]) }}" onclick="return confirm('Are you sure you want to delete this program?')">Delete</a>
        </li>
        {% endfor %}
    </ul>

    <h3>Static Income</h3>
    <ul>
        {% for income in static_income %}
        <li>
            {{ income[1] }} - Amount: {{ income[2] }}
            <a href="{{ url_for('edit_static_income', id=income[0]) }}">Edit</a>
            <a href="{{ url_for('delete_static_income', id=income[0]) }}" onclick="return confirm('Are you sure you want to delete this static income?')">Delete</a>
        </li>
        {% endfor %}
    </ul>

    <h3>Static Overhead</h3>
    <ul>
        {% for overhead in static_overhead %}
        <li>
            {{ overhead[1] }} - Amount: {{ overhead[2] }}
            <a href="{{ url_for('edit_static_overhead', id=overhead[0]) }}">Edit</a>
            <a href="{{ url_for('delete_static_overhead', id=overhead[0]) }}" onclick="return confirm('Are you sure you want to delete this static overhead?')">Delete</a>
        </li>
        {% endfor %}
    </ul>

    <h3>Financial Summary</h3>
    <p>Total Income: {{ total_income }}</p>
    <p>Total Expenses: {{ total_expenses }}</p>
    <p>Profit/Loss: {{ profit_loss }}</p>

    <h3>Break-Even Analysis</h3>
    <ul>
        {% for program in program_break_even %}
        <li>{{ program[0] }} - Break-Even Beds: {{ program[1] | round(2) }}</li>
        {% endfor %}
    </ul>
</body>
</html>